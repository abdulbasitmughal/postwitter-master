(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{TbC0:function(n,l,t){"use strict";t.r(l);var u=t("CcnG"),e=function(){return function(){}}(),o=t("pMnS"),i=t("fCH6"),s=t("37O+"),r=t("Ip0R"),d=t("gIcY"),p=function(){function n(n){this.formBuilder=n,this.alertMessage="",this.post=new u.EventEmitter}return n.prototype.ngOnInit=function(){this.initPostForm()},n.prototype.initPostForm=function(){this.postForm=this.formBuilder.group({postText:["",d.l.required]})},n.prototype.onSumitPost=function(){var n=this.postForm;n.invalid?this.alertMessage="Input some text!":(this.post.emit(n.get("postText").value),n.reset())},n}(),a=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function c(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,15,"form",[["class","bg-white border-1 border-grey rounded-lg container mx-auto shadow "],["novalidate",""],["style","width: 60%;"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,t){var e=!0;return"submit"===l&&(e=!1!==u["\u0275nov"](n,2).onSubmit(t)&&e),"reset"===l&&(e=!1!==u["\u0275nov"](n,2).onReset()&&e),e},null,null)),u["\u0275did"](1,16384,null,0,d.n,[],null,null),u["\u0275did"](2,540672,null,0,d.f,[[8,null],[8,null]],{form:[0,"form"]},null),u["\u0275prd"](2048,null,d.b,null,[d.f]),u["\u0275did"](4,16384,null,0,d.j,[[4,d.b]],null,null),(n()(),u["\u0275eld"](5,0,null,null,5,"textarea",[["class","w-full p-4 rounded-tr-lg rounded-tl-lg"],["formControlName","postText"],["placeholder","Input text to post"],["rows","4"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,t){var e=!0;return"input"===l&&(e=!1!==u["\u0275nov"](n,6)._handleInput(t.target.value)&&e),"blur"===l&&(e=!1!==u["\u0275nov"](n,6).onTouched()&&e),"compositionstart"===l&&(e=!1!==u["\u0275nov"](n,6)._compositionStart()&&e),"compositionend"===l&&(e=!1!==u["\u0275nov"](n,6)._compositionEnd(t.target.value)&&e),e},null,null)),u["\u0275did"](6,16384,null,0,d.c,[u.Renderer2,u.ElementRef,[2,d.a]],null,null),u["\u0275prd"](1024,null,d.g,function(n){return[n]},[d.c]),u["\u0275did"](8,671744,null,0,d.e,[[3,d.b],[8,null],[8,null],[6,d.g],[2,d.p]],{name:[0,"name"]},null),u["\u0275prd"](2048,null,d.h,null,[d.e]),u["\u0275did"](10,16384,null,0,d.i,[[4,d.h]],null,null),(n()(),u["\u0275eld"](11,0,null,null,4,"div",[["class","flex flex-row-reverse items-center bg-grey-lighter p-3 rounded-br-lg rounded-bl-lg border-t"]],null,null,null,null,null)),(n()(),u["\u0275eld"](12,0,null,null,1,"button",[["class","text-sm px-6 py-3 bg-blue text-white rounded hover:bg-blue-light"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.onSumitPost()&&u),u},null,null)),(n()(),u["\u0275ted"](-1,null,["POST"])),(n()(),u["\u0275eld"](14,0,null,null,1,"div",[["class","mr-6 text-sm text-orange"]],null,null,null,null,null)),(n()(),u["\u0275ted"](15,null,["",""]))],function(n,l){n(l,2,0,l.component.postForm),n(l,8,0,"postText")},function(n,l){var t=l.component;n(l,0,0,u["\u0275nov"](l,4).ngClassUntouched,u["\u0275nov"](l,4).ngClassTouched,u["\u0275nov"](l,4).ngClassPristine,u["\u0275nov"](l,4).ngClassDirty,u["\u0275nov"](l,4).ngClassValid,u["\u0275nov"](l,4).ngClassInvalid,u["\u0275nov"](l,4).ngClassPending),n(l,5,0,u["\u0275nov"](l,10).ngClassUntouched,u["\u0275nov"](l,10).ngClassTouched,u["\u0275nov"](l,10).ngClassPristine,u["\u0275nov"](l,10).ngClassDirty,u["\u0275nov"](l,10).ngClassValid,u["\u0275nov"](l,10).ngClassInvalid,u["\u0275nov"](l,10).ngClassPending),n(l,15,0,t.alertMessage)})}var m=t("dh6/"),g=(t("TwVa"),function(){function n(n){this.http=n}return n.prototype.submit=function(n){return this.http.post("/posts",n)},n.prototype.publicPosts=function(){return this.http.get("/posts")},n}()),f=function(){function n(n){this.postService=n,this.posts=[],this.loading=!1}return n.prototype.ngOnInit=function(){this.fetchPosts()},n.prototype.fetchPosts=function(){var n=this;this.loading=!0,this.postService.publicPosts().subscribe(function(l){var t=l.post;n.loading=!1,t&&(n.posts=n.processPostsResponse(t).slice())},function(l){n.loading=!1,console.log("Dummy error says error",JSON.stringify(l))})},n.prototype.processPostsResponse=function(n){return n.map(function(n){var l=n.email,t=n.TimeTag,u=n.Message;return{userHandle:l?"@"+l.split("@")[0]:"",postTime:t,postText:u,userEmail:l}})},n.prototype.onSubmitPost=function(n){var l=this;this.postService.submit({message:n}).subscribe(function(n){l.posts=l.processPostsResponse([n]).concat(l.posts)},function(n){console.log("error in post POST",JSON.stringify(n))})},n}(),v=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function h(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),u["\u0275eld"](1,0,null,null,1,"div",[["class","text-center text-grey text-2xl mt-12"]],null,null,null,null,null)),(n()(),u["\u0275ted"](-1,null,["Loading..."]))],null,null)}function b(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,1,"post-card",[],null,null,null,i.b,i.a)),u["\u0275did"](1,49152,null,0,s.a,[],{userHandle:[0,"userHandle"],postText:[1,"postText"],postTime:[2,"postTime"],userEmail:[3,"userEmail"]},null)],function(n,l){n(l,1,0,l.context.$implicit.userHandle,l.context.$implicit.postText,l.context.$implicit.postTime,l.context.$implicit.userEmail)},null)}function x(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),u["\u0275and"](16777216,null,null,1,null,b)),u["\u0275did"](2,278528,null,0,r.i,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.posts)},null)}function y(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,1,"div",[["class","text-center text-grey text-2xl mt-12"]],null,null,null,null,null)),(n()(),u["\u0275ted"](-1,null,[" No public feed found, why not you post one :) "]))],null,null)}function C(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,1,"new-post-form",[],null,[[null,"post"]],function(n,l,t){var u=!0;return"post"===l&&(u=!1!==n.component.onSubmitPost(t)&&u),u},c,a)),u["\u0275did"](1,114688,null,0,p,[d.d],null,{post:"post"}),(n()(),u["\u0275eld"](2,0,null,null,9,"div",[["class","mt-12 mx-auto"],["style","width: 60%;"]],null,null,null,null,null)),(n()(),u["\u0275eld"](3,0,null,null,0,"div",[["class","border-b border-grey-dark w-32 mx-auto"]],null,null,null,null,null)),(n()(),u["\u0275eld"](4,0,null,null,1,"div",[["class","text-sm uppercase text-grey-darker pb-6 mt-4 text-center font-semibold"]],null,null,null,null,null)),(n()(),u["\u0275ted"](-1,null,["Latest post from all users"])),(n()(),u["\u0275and"](16777216,null,null,1,null,h)),u["\u0275did"](7,16384,null,0,r.j,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),u["\u0275and"](16777216,null,null,1,null,x)),u["\u0275did"](9,16384,null,0,r.j,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),u["\u0275and"](16777216,null,null,1,null,y)),u["\u0275did"](11,16384,null,0,r.j,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,1,0),n(l,7,0,t.loading),n(l,9,0,t.posts.length&&!t.loading),n(l,11,0,!t.loading&&!t.posts.length)},null)}function T(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,1,"app-home-component",[],null,null,null,C,v)),u["\u0275did"](1,114688,null,0,f,[g],null,null)],function(n,l){n(l,1,0)},null)}var w=u["\u0275ccf"]("app-home-component",f,T,{},{},[]),P=t("ZYCi"),R=function(){return function(){}}(),I=t("PCNd");t.d(l,"HomeModuleNgFactory",function(){return S});var S=u["\u0275cmf"](e,[],function(n){return u["\u0275mod"]([u["\u0275mpd"](512,u.ComponentFactoryResolver,u["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,w]],[3,u.ComponentFactoryResolver],u.NgModuleRef]),u["\u0275mpd"](4608,d.d,d.d,[]),u["\u0275mpd"](4608,d.o,d.o,[]),u["\u0275mpd"](4608,r.l,r.k,[u.LOCALE_ID,[2,r.r]]),u["\u0275mpd"](4608,g,g,[m.a]),u["\u0275mpd"](1073742336,P.n,P.n,[[2,P.t],[2,P.k]]),u["\u0275mpd"](1073742336,R,R,[]),u["\u0275mpd"](1073742336,d.m,d.m,[]),u["\u0275mpd"](1073742336,d.k,d.k,[]),u["\u0275mpd"](1073742336,r.b,r.b,[]),u["\u0275mpd"](1073742336,I.a,I.a,[]),u["\u0275mpd"](1073742336,e,e,[]),u["\u0275mpd"](1024,P.i,function(){return[[{path:"",children:[{path:"",component:f}]}]]},[])])})},TwVa:function(n,l){}}]);